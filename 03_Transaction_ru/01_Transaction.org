#+STARTUP: hidestars

#+TITLE: Биткоин транзакция
#+AUTHOR: Андрей Иваницкий
#+DATE: 11 июля 2020

#+REVEAL_ROOT: ../ext/reveal.js-3.9.2/
#+REVEAL_THEME: moon
#+REVEAL_EXTRA_CSS: ../ext/custom-ru.css
#+REVEAL_TITLE_SLIDE: ../ext/title-slide-ru.html
#+REVEAL_TITLE_SLIDE_BACKGROUND: ./../imgs/transactions-screenshot.jpg

#+OPTIONS: num:t toc:nil reveal_history:t

* Криптография
Наука о различных аспектах информационной безопасности, таких как конфиденциальность данных, целостность данных, аутентификация, невозможность отказа от авторства
#+ATTR_REVEAL: :frag (appear)
Традиционно участников криптографических схем и протоколов называют: Алиса, Боб, Кэрол, ...

** Цифровая подпись
Математическая схема для проверки подлинности цифрового сообщения или цифрового документа 
# + ATTR_REVEAL: :frag (appear)
  - *Подлинность* (человек, подписавший документ, намеренно сделал это)
  - *Неподдельность* (никто не может действовать от имени автора)
  - *Невозможность отказа* (после того, как документ подписан цифровой подписью, человек, подписавший документ, не может сказать, что он не подписывал документ)

** Криптосистема с открытым ключом
Пара ключей
 - /открытый ключ/ может быть распространён широко
 - /секретный ключ/ известный только владельцу
-----
 - Владелец может подписать сообщение с помощью /секретного ключа/
 - Любой человек может проверить подпись используя соответствующий /открытый ключ/

** Цифровая подпись в криптосистеме с открытым ключом
#+ATTR_REVEAL: :frag (appear)
   1. Алиса генерирует пару ключей (/открытый/ и /секретный/)
   2. Алиса надёжно передаёт свой /открытый ключ/ Бобу (лично)
   3. Позже Алиса подписывает сообщение с помощью /секретного ключа/
   4. Алиса посылает своё сообщение и /подпись/ Бобу по открытому каналу
   5. Боб, получив это, проверяет подпись, используя /открытый ключ/ Алисы

** Простой пример использования
#+ATTR_REVEAL: :frag (appear)
   1. Алиса и Боб хотят сделать ставки на исход некого спортивного мероприятия
   2. Они делают свои ставки и подписывают их
   3. Они обмениваются своими ставками и подписями
   4. После мероприятия, если Боб выиграл, Алиса не может отозвать свою ставку

* Гроссбух (книга учёта)
#+BEGIN_NOTES
Если вы хотите построить финансовую систему, вам надо вести учёт всех транзакций
#+END_NOTES

#+ATTR_REVEAL: :frag (appear)
Сводный документ, в котором ведётся учёт транзакций и представляются итоговые данные по бухгалтерским отчётам и счетам

** Учёт на основе счетов
*Кто* владеет чем (например, банковская система)
#+ATTR_REVEAL: :frag (appear)
[[../imgs/account-based-ledger.png]]

** Учёт на основе монет
*Что* пренадлежит кому (например, система отслеживания алмазов)
#+ATTR_REVEAL: :frag (appear)
[[../imgs/coin-based-ledger.png]]

** Земельный реестр
#+ATTR_HTML: :height 500;
#+ATTR_REVEAL: :frag (appear)
[[../imgs/land-ledger.png]]

** Транзакция
   - В системах учёта на основе монет /транзакция/ — это смена владельца монеты
   - Транзакции формируют /граф/ владения монет

*** Как юридический документ
*Транзакция Y*\\
Я, Алиса, передаю владение моей землёй *A*, которую я получила в _транзакции X_, следующими частями:
 - _одну половину_ земли — _Бобу_
 - _вторую половину_ земли я оставляю себе _(Алисе)_
_Подпись Алисы_

* Гроссбух биткоина
  - Гроссбух биткоина ведёт учёт индивидуальных *монет* (нет аккаунтов)
  - Учёт владение монетой ведётся с помощью ассоциированного /открытого ключа/[fn:1:Учёт ведётся с помощью /скрипта/, который, в простейшей форме являет собой открытый ключ]

* Биткоин транзакция
** Как юридический документ
*Транзакция Y*\\
Я, Алиса, передаю владение моими 2.7 монетами, которые я получила в _первом выходе транзакции X_, следующими частями:
 - _2.4_ монеты Бобу, идентифицируемым _открытым ключом Боба_
 - _0.2_ монеты Кэрол, идентифицируемой _открытым ключом Кэрол_
Я добровольно плачу 0.1 монеты в качестве комиссии за сервис.\\
_Подпись Алисы_

** Структура транзакции
#+ATTR_REVEAL: :frag (appear)
   - *Входы* ссылаются на выходы предыдущих транзакций
     - первый выход транзакции X
   - *Выходы* указывают количество монет и публичный ключ получателя
     - 2.4 публичному ключу Боба
     - 0.2 публичному ключу Кэрол
   - *Подписи*  аутентифицирует владельцев
     - подпись Алисы
   - /(Неявно)/ *Идентификатор* — это /хэш/ транзакции
   - /(Неявно)/ *Комиссия* вычисляется как разница между суммами выходов и входов транзакции

** Граф транзакций
[[../imgs/transactions.png]]

** Что такое адрес?
   - Биткоин *адрес* — это просто (несколько модифицированный) /открытый ключ/
   - *Баланс* адреса — абстракция кошелька показывающая общее количество монет контролируемых соответствующим /открытым ключом/
(как и бумажник не имеет баланса, но имеет монеты)

** Проблема двойного расходования
#+ATTR_REVEAL: :frag (appear)
   - Если Боб получил транзакцию от Алисы, должен ли он послать товар Алисе?
   - Что мешает Алисе создать другую транзакцию с теми же входами, но выходами для Кэрол?
   - Биткоин решает проблему *двойного расходования* и реализует *цифровую редкость (ограниченность)* без центрального органа власти

* Резюме
  - /Гроссбух/ биткоина — это учёт на основе монет
  - Биткоин /транзакция/ — смена владельца монеты
  - Биткоин транзакции формируют /граф/ владения монет

* Вопросы?
